%
% NOTE: This is for calculating the Animation video for the PCA factors in a time range
%       using the output csv files generated by the PCA analysis
% HIST:  - 1o Oct, 2021: Created by Patra
%=========================================================================

function PCA_Animation=PCA_Animation(year, assettype, filename, PCAfactor)
T1=1:1:24; %Time steps
coeff1=[];
[pathstr,name,ext] = fileparts(filename);

files = dir(strcat('Coefficients/',name,assettype,'_',PCAfactor,year,'*.csv'));% read a single asset
for k=1:size(files)
    filename=strcat('Coefficients/',files(k).name);
    Array=readtable(filename);
    coeff1=Array{:,1};
    figure(1)
    PCA_Animation=plot(T1,coeff1,'.-black', 'markersize',5);
    ylim([-0.6 0.65])
    filenameN=files(k).name;
    [pathstr,name,ext] = fileparts(filenameN);
    Title=strcat(name);
    title(Title)
    drawnow;
end
%toc